% usage: \lstinputlisting[style=Matlab]{filename}

\lstdefinestyle{Matlab}{language=Matlab,        % Use MATLAB
%        frame=single,                          % Single frame around code
        basicstyle=\small\ttfamily,             % Use small true type font
        columns=fullflexible,
        keepspaces=true,
        keywordstyle=[1]\color{Blue}\bfseries,  %  MATLAB functions bold 
        %and blue
        keywordstyle=[2]\color{Purple},         %  MATLAB function arguments 
        %purple
        keywordstyle=[3]\color{Maroon}\bfseries,  % User functions 
        %underlined and blue
        identifierstyle=,                       % Nothing special about identifiers
                                                % Comments small dark green courier
        commentstyle=\usefont{T1}{pcr}{m}{tt}\color{MyDarkGreen},
%        commentstyle=\color{MyDarkGreen}\small,
        stringstyle=\color{Purple},             % Strings are purple
        showstringspaces=false,                 % Don't put marks in string spaces
        tabsize=2,                              % 5 spaces per tab
        %
        %%% Put standard MATLAB functions not included in the default
        %%% language here
        morekeywords={xlim,ylim,var,alpha,factorial,poissrnd,normpdf,normcdf,circshift,switch,
         case,otherwise,try,catch},
        %%%
        morekeywords={
AWG, 
callfemm, 
callfemm_noeval, 
ci_addarc, 
ci_addblocklabel, 
ci_addboundprop, 
ci_addconductorprop, 
ci_addmaterial, 
ci_addnode, 
ci_addpointprop, 
ci_addsegment, 
ci_analyse, 
ci_analyze, 
ci_attachdefault, 
ci_clearselected, 
ci_cleartkpoints, 
ci_close, 
ci_copyrotate, 
ci_copyrotate2, 
ci_copytranslate, 
ci_copytranslate2, 
ci_createmesh, 
ci_createradius, 
ci_deleteboundprop, 
ci_deleteconductor, 
ci_deletematerial, 
ci_deletepointprop, 
ci_deleteselected, 
ci_deleteselectedarcsegments, 
ci_deleteselectedlabels, 
ci_deleteselectednodes, 
ci_deleteselectedsegments, 
ci_detachdefault, 
ci_drawarc, 
ci_drawline, 
ci_drawpolygon, 
ci_drawpolyline, 
ci_drawrectangle, 
ci_getmaterial, 
ci_getview, 
ci_hidegrid, 
ci_hidenames, 
ci_loadsolution, 
ci_makeABC, 
ci_maximize, 
ci_minimize, 
ci_mirror, 
ci_mirror2, 
ci_modifyboundprop, 
ci_modifyconductorprop, 
ci_modifymaterial, 
ci_modifypointprop, 
ci_moverotate, 
ci_movetranslate, 
ci_movetranslate2, 
ci_probdef, 
ci_purgemesh, 
ci_readdxf, 
ci_refreshview, 
ci_resize, 
ci_restore, 
ci_saveas, 
ci_savebitmap, 
ci_savedxf, 
ci_savemetafile, 
ci_scale, 
ci_scale2, 
ci_selectarcsegment, 
ci_selectcircle, 
ci_selectgroup, 
ci_selectlabel, 
ci_selectnode, 
ci_selectrectangle, 
ci_selectsegment, 
ci_setarcsegmentprop, 
ci_setblockprop, 
ci_seteditmode, 
ci_setfocus, 
ci_setgrid, 
ci_setgroup, 
ci_setnodeprop, 
ci_setsegmentprop, 
ci_showgrid, 
ci_showmesh, 
ci_shownames, 
ci_snapgridoff, 
ci_snapgridon, 
ci_zoom, 
ci_zoomin, 
ci_zoomnatural, 
ci_zoomout, 
closefemm, 
complex2str, 
co_addcontour, 
co_bendcontour, 
co_blockintegral, 
co_clearblock, 
co_clearcontour, 
co_close, 
co_getconductorproperties, 
co_gete, 
co_getelement, 
co_getj, 
co_getk, 
co_getnode, 
co_getpointvalues, 
co_getprobleminfo, 
co_getv, 
co_getview, 
co_groupselectblock, 
co_hidecontourplot, 
co_hidedensityplot, 
co_hidegrid, 
co_hidemesh, 
co_hidenames, 
co_hidepoints, 
co_lineintegral, 
co_makeplot, 
co_maximize, 
co_minimize, 
co_numelements, 
co_numnodes, 
co_refreshview, 
co_reload, 
co_resize, 
co_restore, 
co_savebitmap, 
co_savemetafile, 
co_selectblock, 
co_selectpoint, 
co_seteditmode, 
co_setgrid, 
co_showcontourplot, 
co_showdensityplot, 
co_showgrid, 
co_showmesh, 
co_shownames, 
co_showpoints, 
co_showvectorplot, 
co_smooth, 
co_smoothoff, 
co_smoothon, 
co_snapgrid, 
co_snapgridoff, 
co_snapgridon, 
co_zoom, 
co_zoomin, 
co_zoomnatural, 
co_zoomout, 
create, 
ei_addarc, 
ei_addblocklabel, 
ei_addboundprop, 
ei_addconductorprop, 
ei_addmaterial, 
ei_addnode, 
ei_addpointprop, 
ei_addsegment, 
ei_analyse, 
ei_analyze, 
ei_attachdefault, 
ei_attachouterspace, 
ei_clearselected, 
ei_close, 
ei_copyrotate, 
ei_copyrotate2, 
ei_copytranslate, 
ei_copytranslate2, 
ei_createmesh, 
ei_createradius, 
ei_defineouterspace, 
ei_deleteboundprop, 
ei_deleteconductor, 
ei_deletematerial, 
ei_deletepointprop, 
ei_deleteselected, 
ei_deleteselectedarcsegments, 
ei_deleteselectedlabels, 
ei_deleteselectednodes, 
ei_deleteselectedsegments, 
ei_detachdefault, 
ei_detachouterspace, 
ei_drawarc, 
ei_drawline, 
ei_drawpolygon, 
ei_drawpolyline, 
ei_drawrectangle, 
ei_getmaterial, 
ei_hidegrid, 
ei_hidenames, 
ei_loadsolution, 
ei_makeABC, 
ei_maximize, 
ei_minimize, 
ei_mirror, 
ei_mirror2, 
ei_modifyboundprop, 
ei_modifyconductorprop, 
ei_modifymaterial, 
ei_modifypointprop, 
ei_moverotate, 
ei_movetranslate, 
ei_movetranslate2, 
ei_probdef, 
ei_purgemesh, 
ei_readdxf, 
ei_refreshview, 
ei_resize, 
ei_restore, 
ei_saveas, 
ei_savebitmap, 
ei_savedxf, 
ei_savemetafile, 
ei_scale, 
ei_scale2, 
ei_selectarcsegment, 
ei_selectcircle, 
ei_selectgroup, 
ei_selectlabel, 
ei_selectnode, 
ei_selectrectangle, 
ei_selectsegment, 
ei_setarcsegmentprop, 
ei_setblockprop, 
ei_seteditmode, 
ei_setfocus, 
ei_setgrid, 
ei_setgroup, 
ei_setnodeprop, 
ei_setsegmentprop, 
ei_showgrid, 
ei_showmesh, 
ei_shownames, 
ei_snapgridoff, 
ei_snapgridon, 
ei_zoom, 
ei_zoomin, 
ei_zoomnatural, 
ei_zoomout, 
eo_addcontour, 
eo_bendcontour, 
eo_blockintegral, 
eo_clearblock, 
eo_clearcontour, 
eo_close, 
eo_getconductorproperties, 
eo_getd, 
eo_gete, 
eo_getelement, 
eo_getenergydensity, 
eo_getnode, 
eo_getperm, 
eo_getpointvalues, 
eo_getprobleminfo, 
eo_getv, 
eo_groupselectblock, 
eo_hidecontourplot, 
eo_hidedensityplot, 
eo_hidegrid, 
eo_hidemesh, 
eo_hidenames, 
eo_hidepoints, 
eo_lineintegral, 
eo_makeplot, 
eo_maximize, 
eo_minimize, 
eo_numelements, 
eo_numnodes, 
eo_refreshview, 
eo_reload, 
eo_resize, 
eo_restore, 
eo_savebitmap, 
eo_savemetafile, 
eo_selectblock, 
eo_selectpoint, 
eo_seteditmode, 
eo_setgrid, 
eo_showcontourplot, 
eo_showdensityplot, 
eo_showgrid, 
eo_showmesh, 
eo_shownames, 
eo_showpoints, 
eo_showvectorplot, 
eo_smooth, 
eo_smoothoff, 
eo_smoothon, 
eo_snapgrid, 
eo_snapgridoff, 
eo_snapgridon, 
eo_zoom, 
eo_zoomin, 
eo_zoomnatural, 
eo_zoomout, 
hideconsole, 
hidepointprops, 
hi_addarc, 
hi_addblocklabel, 
hi_addboundprop, 
hi_addconductorprop, 
hi_addmaterial, 
hi_addnode, 
hi_addpointprop, 
hi_addsegment, 
hi_addtkpoint, 
hi_addtkpoints, 
hi_analyse, 
hi_analyze, 
hi_attachdefault, 
hi_attachouterspace, 
hi_clearselected, 
hi_cleartkpoints, 
hi_close, 
hi_copyrotate, 
hi_copyrotate2, 
hi_copytranslate, 
hi_copytranslate2, 
hi_createmesh, 
hi_createradius, 
hi_defineouterspace, 
hi_deleteboundprop, 
hi_deleteconductor, 
hi_deletematerial, 
hi_deletepointprop, 
hi_deleteselected, 
hi_deleteselectedarcsegments, 
hi_deleteselectedlabels, 
hi_deleteselectednodes, 
hi_deleteselectedsegments, 
hi_detachdefault, 
hi_detachouterspace, 
hi_drawarc, 
hi_drawline, 
hi_drawpolygon, 
hi_drawpolyline, 
hi_drawrectangle, 
hi_getmaterial, 
hi_getview, 
hi_hidegrid, 
hi_hidenames, 
hi_loadsolution, 
hi_makeABC, 
hi_maximize, 
hi_minimize, 
hi_mirror, 
hi_mirror2, 
hi_modifyboundprop, 
hi_modifyconductorprop, 
hi_modifymaterial, 
hi_modifypointprop, 
hi_moverotate, 
hi_movetranslate, 
hi_movetranslate2, 
hi_probdef, 
hi_purgemesh, 
hi_readdxf, 
hi_refreshview, 
hi_resize, 
hi_restore, 
hi_saveas, 
hi_savebitmap, 
hi_savedxf, 
hi_savemetafile, 
hi_scale, 
hi_scale2, 
hi_selectarcsegment, 
hi_selectcircle, 
hi_selectgroup, 
hi_selectlabel, 
hi_selectnode, 
hi_selectrectangle, 
hi_selectsegment, 
hi_setarcsegmentprop, 
hi_setblockprop, 
hi_seteditmode, 
hi_setfocus, 
hi_setgrid, 
hi_setgroup, 
hi_setnodeprop, 
hi_setsegmentprop, 
hi_showgrid, 
hi_showmesh, 
hi_shownames, 
hi_snapgridoff, 
hi_snapgridon, 
hi_zoom, 
hi_zoomin, 
hi_zoomnatural, 
hi_zoomout, 
ho_addcontour, 
ho_bendcontour, 
ho_blockintegral, 
ho_clearblock, 
ho_clearcontour, 
ho_close, 
ho_getconductorproperties, 
ho_getelement, 
ho_getf, 
ho_getg, 
ho_getk, 
ho_getnode, 
ho_getpointvalues, 
ho_getprobleminfo, 
ho_gett, 
ho_getview, 
ho_groupselectblock, 
ho_hidecontourplot, 
ho_hidedensityplot, 
ho_hidegrid, 
ho_hidemesh, 
ho_hidenames, 
ho_hidepoints, 
ho_lineintegral, 
ho_makeplot, 
ho_maximize, 
ho_minimize, 
ho_numelements, 
ho_numnodes, 
ho_refreshview, 
ho_reload, 
ho_resize, 
ho_restore, 
ho_savebitmap, 
ho_savemetafile, 
ho_selectblock, 
ho_selectpoint, 
ho_seteditmode, 
ho_setgrid, 
ho_showcontourplot, 
ho_showdensityplot, 
ho_showgrid, 
ho_showmesh, 
ho_shownames, 
ho_showpoints, 
ho_showvectorplot, 
ho_smooth, 
ho_smoothoff, 
ho_smoothon, 
ho_snapgrid, 
ho_snapgridoff, 
ho_snapgridon, 
ho_zoom, 
ho_zoomin, 
ho_zoomnatural, 
ho_zoomout, 
IEC, 
main_maximize, 
main_minimize, 
main_resize, 
main_restore, 
messagebox, 
mi_addarc, 
mi_addbhpoint, 
mi_addbhpoints, 
mi_addblocklabel, 
mi_addboundprop, 
mi_addcircprop, 
mi_addmaterial, 
mi_addnode, 
mi_addpointprop, 
mi_addsegment, 
mi_analyse, 
mi_analyze, 
mi_attachdefault, 
mi_attachouterspace, 
mi_clearbhpoints, 
mi_clearselected, 
mi_close, 
mi_copyrotate, 
mi_copyrotate2, 
mi_copytranslate, 
mi_copytranslate2, 
mi_createmesh, 
mi_createradius, 
mi_defineouterspace, 
mi_deleteboundprop, 
mi_deletecircuit, 
mi_deletematerial, 
mi_deletepointprop, 
mi_deleteselected, 
mi_deleteselectedarcsegments, 
mi_deleteselectedlabels, 
mi_deleteselectednodes, 
mi_deleteselectedsegments, 
mi_detachdefault, 
mi_detachouterspace, 
mi_drawarc, 
mi_drawline, 
mi_drawpolygon, 
mi_drawpolyline, 
mi_drawrectangle, 
mi_getmaterial, 
mi_hidegrid, 
mi_hidenames, 
mi_loadsolution, 
mi_makeABC, 
mi_maximize, 
mi_minimize, 
mi_mirror, 
mi_mirror2, 
mi_modifyboundprop, 
mi_modifycircprop, 
mi_modifymaterial, 
mi_modifypointprop, 
mi_moverotate, 
mi_movetranslate, 
mi_movetranslate2, 
mi_probdef, 
mi_purgemesh, 
mi_readdxf, 
mi_refreshview, 
mi_resize, 
mi_restore, 
mi_saveas, 
mi_savebitmap, 
mi_savedxf, 
mi_savemetafile, 
mi_scale, 
mi_scale2, 
mi_selectarcsegment, 
mi_selectcircle, 
mi_selectgroup, 
mi_selectlabel, 
mi_selectnode, 
mi_selectrectangle, 
mi_selectsegment, 
mi_setarcsegmentprop, 
mi_setblockprop, 
mi_setcurrent, 
mi_seteditmode, 
mi_setfocus, 
mi_setgrid, 
mi_setgroup, 
mi_setnodeprop, 
mi_setprevious, 
mi_setsegmentprop, 
mi_showgrid, 
mi_showmesh, 
mi_shownames, 
mi_snapgridoff, 
mi_snapgridon, 
mi_zoom, 
mi_zoomin, 
mi_zoomnatural, 
mi_zoomout, 
mo_addcontour, 
mo_bendcontour, 
mo_blockintegral, 
mo_clearblock, 
mo_clearcontour, 
mo_close, 
mo_geta, 
mo_getb, 
mo_getcircuitproperties, 
mo_getconductivity, 
mo_getelement, 
mo_getenergydensity, 
mo_getfill, 
mo_geth, 
mo_getj, 
mo_getmu, 
mo_getnode, 
mo_getpe, 
mo_getph, 
mo_getpointvalues, 
mo_getprobleminfo, 
mo_groupselectblock, 
mo_hidecontourplot, 
mo_hidedensityplot, 
mo_hidegrid, 
mo_hidemesh, 
mo_hidenames, 
mo_hidepoints, 
mo_lineintegral, 
mo_makeplot, 
mo_maximize, 
mo_minimize, 
mo_numelements, 
mo_numnodes, 
mo_refreshview, 
mo_reload, 
mo_resize, 
mo_restore, 
mo_savebitmap, 
mo_savemetafile, 
mo_selectblock, 
mo_selectpoint, 
mo_seteditmode, 
mo_setgrid, 
mo_showcontourplot, 
mo_showdensityplot, 
mo_showgrid, 
mo_showmesh, 
mo_shownames, 
mo_showpoints, 
mo_showvectorplot, 
mo_smooth, 
mo_smoothoff, 
mo_smoothon, 
mo_snapgrid, 
mo_snapgridoff, 
mo_snapgridon, 
mo_zoom, 
mo_zoomin, 
mo_zoomnatural, 
mo_zoomout, 
newdocument, 
num, 
numc, 
opendocument, 
openfemm, 
prompt, 
quote, 
quotec, 
rawquote, 
showconsole, 
showpointprops, 
smartmesh
        }
        %
        %%% Put MATLAB function parameters here
        morekeywords=[2]{on, off, interp},
        %
        %%% Put user defined functions here
        morekeywords=[3]{
calc_fluid_barrier,
draw_fluid_barrier
},
        %
        morecomment=[l][\color{Blue}]{...},     % Line continuation (...) like 
        %blue comment
        morecomment=[l]%
[\usefont{T1}{pcr}{m}{sl}%
\color{MyDarkGreen}%
\small\bfseries%
]{\%\%},     % Line 
        %continuation (...) like blue comment
%        numbers=left,                           % Line numbers on left
%        firstnumber=1,                          % Line numbers start with line 
%%1
%        numberstyle=\tiny,          % Line numbers are blue
%        stepnumber=2,                            % Line numbers go in steps of 
%%5
		backgroundcolor=\color{VlightBlue},
%        breaklines=true,
%        xleftmargin=7mm,
%        xrightmargin=0mm
    numbers=left,%none,%left,%
    numberstyle={\scriptsize\ttfamily\color{gray}},%\tiny
%    stepnumber=2,
%    numberfirstline=true,
%    numbersep=2pt,
    numbersep=1.5em,
%    firstnumber=auto,
    numberblanklines=false,
    tabsize = 2,
    showstringspaces=false,
    breaklines=true,
%    literate={\-}{}{0\discretionary{-}{}{}}, % delete -
    %frameround=ftff,
    %frame=single
    %  showlines=true,
    emptylines = 1,
    xleftmargin=1em,
    frame=l,
    framesep=2em,
    framexleftmargin=1em,%2.5mm,
    fillcolor=\color{VlightBlue!94!MyDarkBlue},
    framerule=2pt,
    rulecolor=\color{Maroon}
}

\makeatletter
\lst@CCPutMacro\lst@ProcessOther {"2D}{\lst@ttfamily{-{}}{-{}}}
\@empty\z@\@empty
\makeatother
